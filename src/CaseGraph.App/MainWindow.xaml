<ui:FluentWindow x:Class="CaseGraph.App.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 mc:Ignorable="d"
                 Title="CaseGraph Offline"
                 Width="1400"
                 Height="860"
                 MinWidth="1100"
                 MinHeight="700"
                 WindowStartupLocation="CenterScreen"
                 ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
                 ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}">
    <Grid Background="{DynamicResource ShellBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Style="{StaticResource TopBarBorderStyle}">
            <DockPanel LastChildFill="False">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="CaseGraph Offline" Style="{StaticResource AppTitleTextStyle}" />
                    <TextBlock Text="Professional shell baseline" Style="{StaticResource AppSubtitleTextStyle}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" VerticalAlignment="Center">
                    <TextBox Width="260"
                             Margin="{StaticResource SpaceRight12}"
                             Text="{Binding GlobalSearchQuery, UpdateSourceTrigger=PropertyChanged}"
                             Style="{StaticResource TopBarTextBoxStyle}"
                             ToolTip="Global search placeholder" />

                    <ComboBox Width="190"
                              Margin="{StaticResource SpaceRight12}"
                              ItemsSource="{Binding CaseOptions}"
                              SelectedItem="{Binding SelectedCase, Mode=TwoWay}"
                              Style="{StaticResource TopBarComboBoxStyle}" />

                    <Button Content="Toggle Theme"
                            Margin="{StaticResource SpaceRight12}"
                            Command="{Binding ToggleThemeCommand}"
                            Style="{StaticResource TopBarButtonStyle}" />

                    <Button Content="Evidence Drawer"
                            Command="{Binding ToggleEvidenceDrawerCommand}"
                            Style="{StaticResource TopBarButtonStyle}" />
                </StackPanel>
            </DockPanel>
        </Border>

        <Grid Grid.Row="1" Margin="{StaticResource Space16}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="280" />
                <ColumnDefinition Width="16" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="16" />
                <ColumnDefinition Width="340" />
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Style="{StaticResource NavigationPanelBorderStyle}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="Navigation" Style="{StaticResource SectionTitleTextStyle}" />

                    <ListBox Grid.Row="1"
                             Margin="{StaticResource SpaceTop12}"
                             ItemsSource="{Binding NavigationItems}"
                             SelectedItem="{Binding SelectedNavigationItem, Mode=TwoWay}"
                             BorderThickness="0"
                             Background="Transparent"
                             ItemContainerStyle="{StaticResource NavigationListItemStyle}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel>
                                    <TextBlock Text="{Binding Title}" Style="{StaticResource NavigationItemTitleTextStyle}" />
                                    <TextBlock Text="{Binding Description}" Style="{StaticResource NavigationItemDescriptionTextStyle}" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Border>

            <Border Grid.Column="2" Style="{StaticResource ContentPanelBorderStyle}">
                <Frame Content="{Binding CurrentPage}" NavigationUIVisibility="Hidden" />
            </Border>

            <Border Grid.Column="4"
                    Style="{StaticResource EvidenceDrawerBorderStyle}"
                    Visibility="{Binding IsEvidenceDrawerOpen, Converter={StaticResource BoolToVisibilityConverter}}">
                <StackPanel>
                    <TextBlock Text="Evidence Drawer" Style="{StaticResource SectionTitleTextStyle}" />
                    <TextBlock Text="Placeholder region for source details and citations."
                               Margin="{StaticResource SpaceTop12}"
                               Style="{StaticResource BodyTextStyle}"
                               TextWrapping="Wrap" />
                    <TextBlock Text="Future tickets will connect this panel to selected evidence, people, and timeline items."
                               Margin="{StaticResource SpaceTop12}"
                               Style="{StaticResource SecondaryBodyTextStyle}"
                               TextWrapping="Wrap" />
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</ui:FluentWindow>

